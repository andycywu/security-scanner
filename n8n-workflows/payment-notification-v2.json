{
  "meta": {
    "instanceId": "secscan_002",
    "created": "2026-02-13T06:51:00Z",
    "version": "1.0"
  },
  "name": "Security Scanner - Payment Notification",
  "description": "Wise æ”¶æ¬¾é€šçŸ¥èˆ‡å®¢æˆ¶ç®¡ç†è‡ªå‹•åŒ–",
  "active": false,
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $env.WISE_WEBHOOK_URL }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={}",
        "options": {}
      },
      "id": "node_webhook",
      "name": "Wise Webhook",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [100, 200]
    },
    {
      "parameters": {
        "chatId": "1408472778",
        "text": "={{ 'ğŸ’° ã€æ”¶æ¬¾é€šçŸ¥ã€‘\\n\\nğŸ’µ é‡‘é¡: ' + $json.amount + ' ' + $json.currency + '\\nğŸ“ é …ç›®: ' + ($json.reference || 'Security Scanner è¨‚å–®') + '\\nğŸ‘¤ å®¢æˆ¶: ' + ($json.senderName || 'æœªçŸ¥') + '\\nâ° æ™‚é–“: ' + $json.created_at + '\\n\\nğŸ”— https://wise.com/home/review' }}",
        "additionalFields": {}
      },
      "id": "node_telegram_alert",
      "name": "Telegram Alert",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.6,
      "position": [350, 150],
      "credentials": {
        "telegramApi": {
          "id": "CREDENTIAL_ID_TELEGRAM",
          "name": "Telegram Bot API"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "sheetId": "SPREADSHEET_ID",
        "table": "A:E",
        "columns": "=A:B:C:D:E",
        "options": {}
      },
      "id": "node_google_sheets",
      "name": "Google Sheets",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 1,
      "position": [350, 300],
      "credentials": {
        "googleSheetsOAuth2": {
          "id": "CREDENTIAL_ID_GOOGLE",
          "name": "Google Sheets OAuth2"
        }
      }
    },
    {
      "parameters": {
        "toEmail": "={{ $json.customerEmail || 'andycywu@gmail.com' }}",
        "subject": "={{ 'æ„Ÿè¬è³¼è²· Security Scannerï¼è¨‚å–® #' + $json.orderId }}",
        "emailFormat": "html",
        "text": "={{ '<h2>ğŸ‰ æ„Ÿè¬æ‚¨çš„è³¼è²·ï¼</h2>\\n\\n<p>è¦ªæ„›çš„ <strong>' + ($json.senderName || 'å®¢æˆ¶') + '</strong>ï¼Œ</p>\\n\\n<p>æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„ä»˜æ¬¾ï¼š<strong>' + $json.amount + ' ' + $json.currency + '</strong></p>\\n\\n<p>è¨‚å–®è©³æƒ…ï¼š<strong>#' + ($json.orderId || 'SC-' + Date.now()) + '</strong></p>\\n\\n<h3>ğŸ“¦ ç”¢å“è³‡è¨Š</h3>\\n<ul>\\n<li>Security Scanner å€‹äººç‰ˆ</li>\\n<li>GitHub: https://github.com/andycywu/security-scanner</li>\\n</ul>\\n\\n<h3>ğŸ’¡ é–‹å§‹ä½¿ç”¨</h3>\\n<ol>\\n<li>Clone repository</li>\\n<li>åŸ·è¡Œ: python3 scanner.py /path/to/your/skill</li>\\n<li>æŸ¥çœ‹å ±å‘Š</li>\\n</ol>\\n\\n<p>å¦‚æœ‰å•é¡Œï¼Œè«‹è¯ç¹«ï¼š@singularity_capital_bot</p>\\n\\n<p>---<br>å¥‡é»è³‡æœ¬ Singularity Capital LLC</p>' }}",
        "additionalFields": {}
      },
      "id": "node_email",
      "name": "Customer Email",
      "type": "n8n-nodes-base.emailReadImap",
      "typeVersion": 1.4,
      "position": [350, 450],
      "credentials": {
        "smtp": {
          "id": "CREDENTIAL_ID_SMTP",
          "name": "SMTP"
        }
      }
    },
    {
      "parameters": {
        "functionCode": "// è™•ç†æ”¶æ¬¾è³‡æ–™\nconst amount = $json.amount || 0;\nconst currency = $json.currency || 'USD';\nconst orderId = 'SC-' + Date.now().toString(36).toUpperCase();\n\nlet product = 'Security Scanner å€‹äººç‰ˆ $49';\nif (amount >= 499) {\n  product = 'Security Scanner ä¼æ¥­ç‰ˆ $499';\n}\n\nreturn [{\n  json: {\n    amount,\n    currency,\n    orderId,\n    product,\n    created_at: new Date().toISOString(),\n    customerEmail: $json.senderEmail,\n    senderName: $json.senderName,\n    status: 'completed'\n  }\n}];\n"
      },
      "id": "node_order_processor",
      "name": "Order Processor",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [100, 400]
    }
  ],
  "connections": {
    "Wise Webhook": {
      "main": [
        [{"node": "Telegram Alert", "type": "main", "index": 0}],
        [{"node": "Google Sheets", "type": "main", "index": 0}],
        [{"node": "Order Processor", "type": "main", "index": 0}]
      ]
    },
    "Order Processor": {
      "main": [
        [{"node": "Customer Email", "type": "main", "index": 0}]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  }
}
